---
title: 集群（待完善）
date: 2021-12-11
category: Redis
tag:
 - Redis
---

## 1. 问题

- 容量不够，Redis 如何进行扩容？
- 并发写操作，Redis 如何分摊？
- <font color="red">另外，主从模式、薪火相传模式，主机宕机，导致 ip 地址发生变化，应用程序中配置需要修改对应的主机地址、端口等信息</font>

之前通过代理主机来解决，但是 <font color="red">Redis 3.0</font> 中提供了解决方案，就是无中心化集群配置

## 2. 什么是集群

- Redis 集群实现了对 Redis 的水平扩容，即启动 N 个 Redis 节点，将整个数据库分布存储在这  N 个节点中，每个节点存储总数据的 1 / N
- Redis 集群通过分区（partition）来提供一定程度的可用性（availability）：即使集群中有一部分节点失效或者无法进行通讯，集群也可以继续处理命令请求

## 3. 删除持久化数据

将 rdb，aof 文件都删除掉

## 4. 制作 6 个实例，6379，6380，6381，6389，6390，6391

### 4.1 配置基本信息

```shell
开启 daemonize yes
Pid 文件名字
指定端口
Log 文件名字
Dump.rdb 名字
Appendonly 关掉或者换名字
```



### 4.2 redis cluster 配置修改



### 4.3 修改好 redis6379.conf 文件，拷贝多个redis.conf 文件



### 4.4 使用查找替换修改另外 5 个文件



### 4.5 启动 6 个 redis 服务



## 5. 将六个节点合成一个集群



## 6. -c 采用集群策略连接，设置数据会自动切换到相应的写主机



## 7. 通过 cluster nodes 命令查看集群信息



## 8. redis cluster 如何分配这六个节点



## 9. 什么是 slots



## 10. 在集群中录入值



## 11. 查询集群中的值



## 12. 故障恢复



## 13. 集群中的 Jedis 开发



## 14. Redis 集群提供的好处



## 15. Redis 集群的不足